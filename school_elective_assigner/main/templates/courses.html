{% load static %}  
{% load crispy_forms_tags %}
  <div class="tab-pane fade" id="valgfag" role="tabpanel" aria-labelledby="valgfag-tab">

    <div class="opret_t">
      <button type="button" class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#addCourseModal">Opret Fag</button>
    </div>

    <div class="accordion card-body" id="accordion-courses">

      {% for course in courses %}

      <div class="accordion-item col-lg-11 mx-auto">
        <h2 class="accordion-header" id="courses-header">
          {% comment %} A CSS class name seemingly cannot start with a number? Therefore I write an<id> below. {% endcomment %}
          <button class="accordion-button {% if forloop.counter0 != 0%} collapsed {% endif %}"
                  type="button" data-bs-toggle="collapse" data-bs-target="#a{{ course.id  }}"
                                                                                   aria-expanded="false"
                                                                                   aria-controls="a{{ course.id }}">
            {{ course.name }}
              <button class="icon_edit_cour icon_absolute"><img src="{% static 'libs/node/node_modules/bootstrap-icons/icons/pencil.svg' %}" alt="Bootstrap" width="20" height="20"></button>
              <button  class="icon_del_cour icon_absolute"><img src="{% static 'libs/node/node_modules/bootstrap-icons/icons/trash.svg' %}" alt="Bootstrap" width="20" height="20"></button>
          </button>

        </h2>
        <div id="a{{ course.id }}" class="accordion-collapse collapse {% if forloop.counter0 == 0%} show {% endif %}"
          aria-labelledby="courses-header" data-bs-parent="#accordion-courses">
          <div class="accordion-body">
              <p>
                  LÃ¦rere: 
                  {% for teacher in teachers %}
                  {% comment %} if the current course is a course the teacher teaches {% endcomment %}
                    {% if course in teacher.courses.all %}
                    {{ teacher.full_name }} 
                    {% endif %}
                  {% endfor %}
              </p>
              <p>
                {{ course.description }}                
              </p>
          </div>
        </div>
      </div>
      {% endfor %}
    </div>
  </div>

  <!-- Add Course Modal -->
  <div class="modal fade" id="addCourseModal" tabindex="-1" aria-labelledby="addCourseModalLabel" aria-hidden="true">
    <div class="modal-dialog">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="addStudentModalLabel">Opret Fag</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>
  
        <form method="post" accept-charset="utf-8">
  
          {% csrf_token %}
  
          <div class="modal-body">
            {{courseForm|crispy}}
          </div>
          <div class="modal-footer">
            <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Annuller</button>
            <input type="submit" value="Gem Studerende" name="add-course" class="btn btn-primary">
          </div>
        </form>
  
      </div>
    </div>
  </div>